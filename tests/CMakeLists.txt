set(TEST_DATA_DIR ${CMAKE_CURRENT_SOURCE_DIR}/data)

# build a single test binary
add_executable(test_desktopfile
    test_desktopfile.cpp
    test_desktopfileentry.cpp
    test_desktopfilereader.cpp
    test_desktopfilewriter.cpp
    test_desktopfile_conformance.cpp
    test_desktopexecentrytokenizer.cpp
    main.cpp
)

target_link_libraries(test_desktopfile PRIVATE linuxdeploy_desktopfile gtest)

set_property(TARGET test_desktopfile
    PROPERTY COMPILE_FLAGS "-DDESKTOP_FILE_PATH=\\\"${TEST_DATA_DIR}/simple_app.desktop\\\""
)

add_test(test_desktopfile test_desktopfile)
